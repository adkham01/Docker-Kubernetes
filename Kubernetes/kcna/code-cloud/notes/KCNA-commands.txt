Fundamentals
------------
k run nginx --image nginx
k get pods
k describe pod nginx
k get pods -o wide

Resources
---------
k apply -f pod-definition.yml
k create -f replicaset-definition.yml
k get replicaset
k delete replicaset myapp-replicaset
k replace -f replicaset-definition.yml
k scale --replicas=6 replicaset-definition.yml
k get replicaset
k edit replicaset myapp-replicaset
k scale replicaset myapp-replicaset --replicas=2

Deployment: Project manager ğŸ‘¨â€ğŸ’¼
ReplicaSet: Team leader ğŸ‘©â€ğŸ«
Pods: Workers ğŸ‘·

k rollout status deployment/myapp-deployment
k rollout undo deployment myapp-deployment
k rollout history deployment.apps/myapp-deployment
k create -f deployment.yml --record
k edit deployment myapp-deployment --record=true

K create deployment --image=nginx nginx 
k expose deployment nginx --port 80
k edit deployment nginx
k scale deployment nginx --replicas=5
k set image deployment nginx nginx=nginx:1.18
k create -f nginx.yml 
k replace -f nginx.yml
k delete -f nginx.yml
k replace --force -f nginx.yml
k explain pods --recursive
k apply -f /path/to/config-files

Namespace
---------
k create -f pod-definition.yml --namespace=dev
k create namespace dev
k config set-context $(kubectl config current-context) --namespace=dev
k get pods --namespace=default
k get pods --namespace=prod
k config set-context $(kubectl config current-context) --namespace=prod
k get pods --all-namespaces

Scheduling
----------
k get pods --selector app=App1
k taint nodes node-name key=value:taint-effect
k taint nodes node1 app=blue:NoSchedule
k describe node kubemaster | grep Taint
k label nodes <node-name> <label-key>=<label-value>
k label nodes node-1 size=Large
  - nodeSelector = simple filter
  - nodeAffinity = pow erful filter (required/preferred)
  - Node Affinity: Pod chooses where to run

Security
--------
o genrsa --out ca.key 2048
o req -new -key ca.key -subj "//CN=KUBERNETES-CA" -out ca.cer
o x509 -req -in ca.csr -signkey ca.key -out ca.crt
o genrsa -out admin.key 2048
o req -new -key admin.key -subj "//CN=kube-admin" -out admin.csr
o x509 -req -in admin.csr -CA ca.crt -CAkey ca.key -out admin.crt
o req -new -key apiserver.key -subj "//CN=kube-apiserver" -out \
apiserver.csr -config openssl.cnf
openssl x509 -req -in apiserver.csr -CA ../ca.crt   -CAkey ../ca.key \
-CAcreateserial -out apiserver.crt -extensions v3_req -extfile openssl.cnf \
-days 1000
k config view
k config view --kubeconfig=my-custom-config
k config use-context prod-user@prod = t change currnt context
k create -f developer-reole.
k get roles
k get rolebindings
k describe role developer
k describe rolebinding devuser-developer-bindings
k auth can-i create deployments
k auth can-i delete nodes
k auth can-i create deployments --as dev-user
k auth can-i create pods --as dev-user --namespace test
k api-resources --namespaced=true
k create -f cluster-admin-role-binding.yml
k create serviceaccount dashboard-sa
k create serviceaccount dashboard-sa
k get serviceaccount
k describe serviceaccount dashboard-sa
k create token dashboard-sa
k create token dashboard-sa | jq -R '{"token": .}' > token.json

k create secret docker-registry regcred \
--docker-server= private-registry.io    \
--docker-username= registry-user        \
--docker-password= registry-password    \
--docker-email= registry-user@gmail.com 


Token
-----
echo "YOUR_JWT" | cut -d'.' -f2 | base64 -d | jq .

Storage
-------
k get persistentvolume
kubectl delete pvc myclain

Cloud Native Architecture
-------------------------
k create -f hpa.yml
k get hpa

VPA system:
  - VPA: calculates recommendations
  - VPA Admission Controller: applies on new pods
  - VPA Updater: restarts old pods to apply changes
  # Use Windows-style path with forward slashes
  notes.kaiwalyakoparkar.com/kcna